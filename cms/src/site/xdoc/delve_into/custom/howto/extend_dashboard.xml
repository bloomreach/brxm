<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<!--
  Copyright 2007 Hippo

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
  <properties>
      <title>Embed your GUI plugin in the dashboard</title>
  </properties>
  <body>

    <section name="Giving our plugin a place on the dashboard">
      <span class="shortdesc">Modify the dashboard layout to give your GUI plugin a permanent place.</span>
      <p>
        Now instead of replacing an existing plugin it would be nice if our plugin 
        had it's own pace on the dashboard. For this we have to edit the file 
        <b>/package/layout/src/main/webapp/WEB-INF/layouts/default/org/hippoecm/frontend/plugins/cms/dashboard/DashboardPerspective.html</b>.
        Here we add the following code at the location we want to render our plugin.
      </p>
      
      <p>
        FIXME: Build package-layout after modifying it
      </p>
      <p>
        FIXME: HTML code outdated
      </p>
      <source>
<![CDATA[<h2>
  <span class="task">HelloWorld</span>
</h2>
<div class="panel">
  <div class="plugin" wicket:id="extension.helloworld">HelloWorld</div>
</div>]]>
      </source>

      <subsection name="Adding you plugin to the repository">
        <p>
          First we need to create a node for our plugin. To do this navigate (in the console) to 
          <b>/hippo:configuration/hippo:frontend/cms/cms-static</b>. Make sure you have the "cms-static" 
          node selected. 
          Now add a node called "helloWorldPlugin" and give the primary type "frontend:plugin". 
          Add two properties to the new node. One called "plugin.class" with the value of your 
          plugin (org.example.helloworld.HelloWorldPlugin)
          and a second one called "wicket.id" with the value "service.helloworld".
          Now the plugin is added to the repository and it is time for the dashboard to find it 
          (Don't forget to save your changes).
        </p>

        <p>
          Our plugin is in the repository but the dashboard doesn't know that, so time to
          update the dashboard. Using the console, navigate to
          <b>hippo:configuration/hippo:frontend/cms/cms-dashboard/dashboardPerspective</b>. Under wicket.extensions
          you will see the current plugins shown on the dashboard. Add an entry "extension.helloworld".
          Next add a property called "extension.helloworld" and give it the value "service.helloworld".
          Now the dashboard knows where to find the plugin that is referenced by extension.helloworld 
          (again, don't forget to save your changes).
        </p>
        <p>
          Now if you log in to the CMS the HelloWorldPlugin should show up on the dashboard.
        </p>

      </subsection>

      <p>
        <a href="hello_model.html">Continue to "Making the Hello World plugin context sensitive"</a>
      </p>

    </section>

  </body>
</document>
