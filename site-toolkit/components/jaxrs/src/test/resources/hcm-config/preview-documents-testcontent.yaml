definitions:
  config:
    /hippo:configuration/hippo:domains/preview-documents-testcontent:
      jcr:primaryType: hipposys:domain
      /hippo-document:
        jcr:primaryType: hipposys:domainrule
        /availability-live:
          jcr:primaryType: hipposys:facetrule
          hipposys:equals: true
          hipposys:facet: hippo:availability
          hipposys:filter: true
          hipposys:type: String
          hipposys:value: preview
        /content-and-descendants:
          jcr:primaryType: hipposys:facetrule
          hipposys:equals: true
          hipposys:facet: jcr:path
          hipposys:type: Reference
          hipposys:value: /testcontent
        # Although hippo:availability = live should suffice, this is an extra safe guard
        /state-not-draft:
          jcr:primaryType: hipposys:facetrule
          hipposys:equals: false
          hipposys:facet: hippostd:state
          hipposys:filter: true
          hipposys:type: String
          hipposys:value: draft
      /readonly:
        jcr:primaryType: hipposys:authrole
        hipposys:userrole: xm.preview-documents.reader
        hipposys:role: readonly
