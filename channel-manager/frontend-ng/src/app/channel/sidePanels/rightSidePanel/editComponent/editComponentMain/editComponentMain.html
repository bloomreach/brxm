<!--
  ~ Copyright 2018-2020 Hippo B.V. (http://www.onehippo.com)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~  http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<form name="$ctrl.form"
  class="form-dense-layout"
  flex>
  <md-subheader md-colors="{background: 'hippo-grey-200'}"
              ng-if="$ctrl.ComponentEditor.isForeignPage()">
  <!-- use double quotes in the click action expression so we can use single quotes in the translation value -->
  <div translate="COMPONENT_EDITOR_GO_BACK_TO_PAGE_LINK"
      translate-value-click-action='$ctrl.ComponentEditor.openComponentPage()'
      translate-compile></div>
  </md-subheader>
  <component-variants on-variant-updated="$ctrl.onVariantUpdated(variant)"
                      on-variant-initiated="$ctrl.onVariantInitiated(variant)"
                      ng-if="$ctrl.variantsVisible">
  </component-variants>

  <md-subheader md-colors="{background: 'hippo-grey-200'}"
              ng-if="$ctrl.hasNoProperties()">
  <div>{{ ::'FEEDBACK_NO_EDITABLE_COMPONENT_PROPERTIES' | translate }}</div>
  </md-subheader>

  <property-group class="top-level"
                ng-repeat="propertyGroup in $ctrl.getPropertyGroups() track by propertyGroup.label"
                group="propertyGroup"
                read-only="$ctrl.isReadOnly()">
  </property-group>
</form>

<md-toolbar>
  <div class="md-toolbar-tools">
    <div class="column left">
      <md-button class="qa-deletecomponent large-label"
                 ng-click="$ctrl.deleteComponent()"
                 ng-disabled="$ctrl.isDeleteDisabled()">
        {{ ::'DELETE_COMPONENT' | translate }}
      </md-button>
    </div>

    <div class="column right">
      <md-button class="qa-discard"
                ng-click="$ctrl.discard()"
                ng-disabled="!$ctrl.isDiscardAllowed()">
        {{ ::'DISCARD' | translate }}
      </md-button>

      <md-button class="qa-save md-accent"
                ng-click="$ctrl.save()"
                ng-disabled="!$ctrl.isSaveAllowed()">
        {{ ::'SAVE' | translate }}
      </md-button>
    </div>

  </div>
</md-toolbar>
