/*
 * Copyright 2018-2021 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

@import 'variables';

document-fields {
  display: block;
  padding-right: $form-dense-distance;
  padding-top: $form-dense-distance;

  & & {
    padding-right: 0;
    padding-top: 0;
  }

  label {
    // md-tooltip searches for the first parent with pointer-events
    // ng-material disables pointer events on labels, they should be enabled
    // when using md-no-float
    pointer-events: auto !important;

    &::after {
      content: '' !important; // hide material required mark
    }
  }

  .checkbox-hint {
    font-size: 18px;
    height: 18px;
    min-height: 18px;
    min-width: 18px;
    vertical-align: baseline;
    width: 18px;
  }

  &.collapsed {
    padding-right: 0;
    padding-top: 0;
  }
}

primitive-field,
compound-field,
choice-field {
  display: block;

  .field {
    padding-left: $form-dense-distance;
  }
}

primitive-field,
compound-field {
  primitive-field > .field {
    padding-left: 0;
  }
}

.field {
  &--bordered {
    border-left: 3px solid map-get($grey, 500);
    margin-bottom: $form-dense-distance;

    & & {
      border-left: none;
    }
  }

  &--focused {
    border-color: $blue-500;
  }

  &--invalid {
    border-color: map-get($red, 500);
  }

  &--multiple {
    .md-errors-spacer {
      min-height: 0;
    }
  }

  &--ghost {
    display: none !important;
  }

  &--dragged,
  &--dragged * {
    cursor: grabbing !important;
  }

  &--dragged {
    .md-input-focused,
    .md-input-has-placeholder,
    .md-input-has-value {
      label:not(.md-no-float) {
        display: none;
      }
    }

    compound-field > & {
      margin-right: -$form-dense-distance;
      padding-right: $form-dense-distance;
    }
  }

  &__title {
    margin-left: -6px;

    h5 {
      margin-bottom: 0;
      position: relative;
    }

    &--focused,
    &--focused &-icon {
      color: $blue-500;
    }

    &--invalid,
    &--invalid &-icon {
      color: map-get($red, 500);
    }

    & ~ document-fields {
      margin-top: $form-dense-distance;

      &.collapsed {
        margin-top: 0;
      }
    }
  }

  &__title-buttons {
    margin-right: -8px;

    .md-button.md-icon-button {
      margin: 0;
    }
  }

  &__secondary-buttons {
    opacity: 0;
    transition: opacity 1s;

    .field:hover > .field__title &,
    .field:focus-within > .field__title &,
    .field--dragged > .field__title &,
    .field--focused > .field__title & {
      opacity: 1;
    }
  }

  &__buttons {
    margin-right: -8px;
    margin-top: 12px;
    max-width: 8px;
    overflow: hidden;
    transition: max-width 1s;

    md-input-container:hover + &,
    .field--dragged &,
    .md-input-focused + &,
    &:focus-within,
    &:hover {
      max-width: 100%;
    }

    .md-button.md-icon-button {
      margin: 0;
    }
  }

  &__tools {
    margin-bottom: 16px;
  }

  &__button-add {
    text-align: right;

    .md-button.md-icon-button {
      margin: 0;
    }

    & > .md-button:last-child {
      margin-right: -8px;
    }
  }

  &__error {
    margin-left: $icon-size + 4px;
  }
}
