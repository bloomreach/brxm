<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
  <!--
    Copyright 2008 Hippo

    Licensed under the Apache License, Version 2.0 (the  "License");
    you may not use this file except in compliance with the License.
    You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS"
    BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.

  -->
<document>
  <properties>
    <title>Repository Configuration</title>
  </properties>
  <body>
   <section name="Repository Configuration">
      <span class='shortdesc'>The base repository configuration through a number of XML files.</span>              <!-- tree -->
           <p>
                The repository configuration file is an XML file that specifies the components
                and configuration of the content repository. Hippo Repository by default ships
                with a repository.xml configuration file.
                You only need to know about this configuration file if you need a non-default
                PersistenceManager, AccessManager, LoginModule or SearchIndex.

            </p>
            <p>
                The standard repository configuration for Jackrabbit
                can be found at
                <a href="http://jackrabbit.apache.org/jackrabbit-configuration.html">http://jackrabbit.apache.org/jackrabbit-configuration.html</a>.
                This page refers to that page for parts that are the same, and elaborates on those parts
                that are specific for Hippo Repository.
            </p>

            <p>
                The repository configuration file consists of:
            </p>
            <ul>
                <li><a href="#FileSystem_element">FileSystem element</a></li>
                <li><a href="#Security_element">Security element</a></li>
                <li><a href="#Workspaces_root_directory_element">Workspaces root directory element</a></li>
                <li><a href="#Workspace_element">Workspace element</a></li>
                <li><a href="#Versioning_element">Versioning element</a></li>
                <li><a href="#SearchIndex_element">SearchIndex element</a></li>
            </ul>
            <p>
                The configuration file has the following overall outline:
            </p>
<source>
&lt;Repository&gt;
    &lt;FileSystem class="..."&gt;...&lt;/FileSystem&gt;
    &lt;Security&gt;
    &lt;AccessManager class="..."&gt;...&lt;/AccessManager&gt;

    [ &lt;LoginModule class="..."&gt;...&lt;/LoginModule&gt; ]
    &lt;/Security&gt;
    &lt;Workspaces rootPath="..." defaultWorkspace="..."/&gt;

    &lt;Workspace name="..."&gt;
    &lt;FileSystem class="..."&gt;...&lt;/FileSystem&gt;
    &lt;PersistenceManager class="..."&gt;...&lt;/PersistenceManager&gt;
    [ &lt;SearchIndex class="..."&gt;

    ...
    [ &lt;FileSystem class="..."&gt;...&lt;/FileSystem&gt; ]
    &lt;/SearcIndex&gt; ]
    &lt;/Workspace&gt;
    &lt;Versioning rootPath="..."&gt;

    &lt;FileSystem class="..."&gt;...&lt;/FileSystem&gt;
    &lt;PersistenceManager class="..."&gt;...&lt;/PersistenceManager&gt;
    &lt;/Versioning&gt;
&lt;/Repository&gt;
</source>
           <p>
                The XML attribute values in the configuration file are interpreted as plain strings
                except for a few special variables, namely ${rep.home}, ${wsp.name} and ${wsp.home}.
            </p>
            <p>
                See the <a href="http://jackrabbit.apache.org/jackrabbit-configuration.html">Jackrabbit documentation</a>
                for more information.
            </p>

            <subsection name="FileSystem element">
                <p>
                    The virtual file system used by the repository to persist global state such as
                    registered namespaces, custom node types, etc.
                </p>
                <p>
                    See the <a href="http://jackrabbit.apache.org/jackrabbit-configuration.html">Jackrabbit documentation</a>
                    for more information.
                </p>
            </subsection>

            <subsection name="Security element">
                <p>
                    The Security element specifies the name of the app-entry
                    in the JAAS configuration and the access manager.
                    Hippo Repository by default uses the following configuration:
                </p>
<source>
&lt;Security appName="Jackrabbit"&gt;
    &lt;AccessManager
        class="org.hippoecm.repository.security.SimpleAccessManager"&gt;
    &lt;/AccessManager&gt;
    &lt;LoginModule class="org.hippoecm.repository.security.HippoLoginModule"&gt;
        &lt;param name="anonymousId" value="anonymous"/&gt;
    &lt;/LoginModule&gt;
&lt;/Security&gt;
</source>
                <p>
                    SimpleAccessManager is the Hippo Repository default access manager implementation, and
                    <a href="authentication.html">HippoLoginModule</a>
                    the default login implementation.
                </p>
                <p>
                    See <a href="authentication.html">Authentication and Users</a>
                    for more information.
                </p>
            </subsection>

            <subsection name="Workspaces element">
                <p>
                    Configures the location of the workspaces root directory and the name of the default workspace.
                </p>
<source>
&lt;Workspaces rootPath="${rep.home}/workspaces" defaultWorkspace="default"/&gt;
</source>
            </subsection>
            <subsection name="Workspace element">
                <p>
                    The Workspace element is used as a template for separate workspace configuration files created
                    for each new workspace.
                </p>
                <p>
                    See <a href="workspace.html">Workspace configuration</a> for more information.
                </p>
            </subsection>
            <subsection name="SearchIndex element">
                <p>
                    Search index for content that is shared repository wide
                    (/jcr:system tree, contains mainly versions).
                </p>
                <p>
                    See
                    <a href="searchindex.html">Search Index configuration</a> for more information.
                </p>
            </subsection>
            <subsection name="Versioning element">
                <p>
                    Used for configuring versioning related settings. Versioning is not yet implemented.
                </p>
            </subsection>
      </section>
   </body>
</document>
