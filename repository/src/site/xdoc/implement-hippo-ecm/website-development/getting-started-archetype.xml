<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC
  "-//Apache Software Foundation//DTD XDOC 1.0//EN"
  "http://maven.apache.org/dtd/xdoc_1_0.dtd">
<!--
  Copyright 2007 Hippo

  Licensed under the Apache License, Version 2.0 (the  "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS"
  BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->
<document>
  <properties>
    <title>Getting started</title>
  </properties>
  <body>
    <section name="Getting started">
      
      <p>
        The Hippo Site Toolkit 2 is a toolkit for developing JSP based websites using
        the Hippo ECM stack. This page helps you to get up and running with your own
        HST-2 based project as quickly as possible. It is assumed that you have
        <a href="http://maven.apache.org/">Maven 2</a> installed, and that you have
        some basic knowledge on how to use it.
      </p>
      
      <subsection name="Obtaining the Hippo Site Toolkit 2">

        <p>
          Until the Hippo Site Toolkit 2 is released, you need to be build it from the sources,
          which are available from the public Hippo SVN repository. Use the following command
          to check out the sources:
        </p>
        
        <source>svn checkout https://svn.hippocms.org/repos/hippo/experimental/hst2/trunk hst2</source>
        
        <p>
          Once all the sources are checked out, run the following Maven command from the
          <code>hst2</code> directory:
        </p>
        
        <source>mvn install</source>
        
        <p>
          This will build all the HST-2 packages, including the Maven project template (a.k.a. <i>archetype</i>)
          we will use, and install them in your local Maven repository.
        </p>

      </subsection>
      
      <subsection name="Creating your project">

        <p>
          To kick start your project, you can use the <code>hippo-ecm-hst-archetype-start</code> template.
          The default code provides: a custom ECM project containing a pre-configured content repository 
          and CMS, sample content, and a sample website. 
        </p>
        
        <p>
          To create a project named <code>myproject</code> in the <code>org.example</code> package, use the 
          following command in a location of choice:
        </p>

        <source>
mvn archetype:create \ 
  -DgroupId=org.example \ 
  -DartifactId=myproject \
  -Dversion=1.01.00 \
  -DarchetypeGroupId=org.hippoecm.hst \ 
  -DarchetypeArtifactId=hippo-ecm-hst-archetype-start \ 
  -DarchetypeVersion=1.01.00-SNAPSHOT 
        </source>
        
        <p>
          Maven will create a project for you (in a newly created directory named <code>myproject</code>)
          containing 3 subprojects:
        </p>
        
        <ul>
          <li>
            <p>ecm - a pre-configured content repository and CMS</p>
          </li>
          <li>
            <p>content - sample content including a document type and some documents for the sample site</p>
          </li>
          <li>
            <p>site - a sample JSP based website</p>
          </li>
        </ul>

        <p>
          Now build your project using the following command in the root directory of your project:
        </p>
        
        <source>mvn install</source>
        
        <p>
          This will produce two WAR files:
        </p>
        
        <ul>
          <li>
            <p>myproject-ecm-1.01.00.war (located in <code>ecm/target</code>)</p>
          </li>
          <li>
            <p>myproject-site-1.01.00.war (located in <code>site/target</code>)</p>
          </li>
        </ul>
      
      </subsection>
      
      <subsection name="Deploying your project in Tomcat">
        
        <p>
          Download Tomcat 6.0 from the <a href="http://tomcat.apache.org/download-60.cgi">Apache Tomcat</a> website
          and install it. In the following instructions we assume you installed it in a directory named
          <code>apache-tomcat-6.0.16</code>.
        </p>
        
        <p>
          Download <a href="http://repo1.maven.org/maven/geronimo-spec/jars/geronimo-spec-jta-1.0-M1.jar">geronimo-spec-jta</a>
          to <code>apache-tomcat-6.0.16/lib</code>.
        </p>
        
        <p>
          Copy <code>myproject-ecm-1.01.00.war</code> to <code>apache-tomcat-6.0.16/webapps/cms.war</code>.
        </p>
        
        <p>
          Copy <code>myproject-site-1.01.00.war</code> to <code>apache-tomcat-6.0.16/webapps/site.war</code>.
        </p>
        
        <p>
          Start Tomcat with one of the startup scripts in <code>apache-tomcat-6.0.16/bin</code>.
        </p>
        
        <p>
          Hippo CMS is now available at <a href="http://localhost:8080/cms/">http://localhost:8080/cms/</a>.
          You can login as user <i>admin</i> using the password <i>admin</i>. The sample website is now available
          at <a href="http://localhost:8080/site/preview/index">http://localhost:8080/site/preview/index</a>.
        </p>
        
      </subsection>
      
      <subsection name="Running your project with Jetty">
        
        <p>
          For a fast development cycle, you can run both the CMS/Repository and the website
          from the command line using Jetty.
        </p>
        
        <p>
          To run the CMS and repository, run the following command from the <code>ecm</code> directory:
        </p>
        
        <source>mvn jetty:run-war</source>
        
        <p>
          Hippo CMS 7 is now available at <a href="http://localhost:8080/">http://localhost:8080/</a>.
          You can login as user <i>admin</i> using the password <i>admin</i>.
        </p>
        
        <p>
          To run the sample website, run the following command from the <code>site</code> directory:
        </p>
        
        <source>mvn jetty:run</source>

        <p>
          The sample website is now available at <a href="http://localhost:8085/preview/index">http://localhost:8085/preview/index</a>.
        </p>
        
        <p>
          <i>Note: while running in Jetty is great for development, it is not recommended for production.</i> 
        </p>

      </subsection>
      
      
    </section>
  </body>
</document>
