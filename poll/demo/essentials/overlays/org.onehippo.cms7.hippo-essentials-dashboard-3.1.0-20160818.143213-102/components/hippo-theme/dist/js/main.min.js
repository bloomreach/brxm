/*!
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(){"use strict";angular.module("hippo.theme",["ngAria","ui.bootstrap","ui.tree","localytics.directives","hippo-theme.templates"])}(),angular.module("hippo-theme.templates",["carousel/carousel-indicator.tpl.html","carousel/carousel.tpl.html","confirmation-dialog/confirmation-dialog.tpl.html","hippo-icon/hippo-icon.tpl.html","tree/tree-include.tpl.html","tree/tree.tpl.html"]),angular.module("carousel/carousel-indicator.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("carousel/carousel-indicator.tpl.html",'<img data-ng-src="{{imgSrc}}">')}]),angular.module("carousel/carousel.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("carousel/carousel.tpl.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()"><ol class="carousel-indicators" ng-show="slides.length > 1"><li hippo-carousel-indicator ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li></ol><div class="carousel-inner" ng-transclude></div><a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a> <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a></div>')}]),angular.module("confirmation-dialog/confirmation-dialog.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("confirmation-dialog/confirmation-dialog.tpl.html",'<div class="alert alert-warning confirmation-dialog" data-ng-class="{\'s-visible\': show, \'s-invisible\': !show}"><div ng-transclude></div><p class="text-right buttons"><button class="btn btn-default" data-ng-click="performConfirmation()"><hippo-icon name="{{confirmIcon}}" size="m" data-ng-show="confirmIcon"></hippo-icon>&nbsp;{{ confirmLabel }}</button> &nbsp;&nbsp; <button class="btn btn-default" data-ng-click="performCancel()">{{ cancelLabel }}</button></p></div>')}]),angular.module("hippo-icon/hippo-icon.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("hippo-icon/hippo-icon.tpl.html",'<svg ng-class="className"><use xlink:href="{{xlink}}"></svg>')}]),angular.module("tree/tree-include.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("tree/tree-include.tpl.html",'<div ui-tree-handle data-ng-click="selectItem()"><div hippo-tree-template></div></div><ol ui-tree-nodes ng-model="item.items" ng-if="!collapsed"><li ng-repeat="item in item.items" ui-tree-node data-hippo-node-template-url="tree/tree-include.tpl.html" ng-if="displayTreeItem(item)" data-ng-class="{active: selectedItem.id == item.id}" scroll-to-if="selectedItem.id == item.id" data-collapsed="item.collapsed"></li></ol>')}]),angular.module("tree/tree.tpl.html",[]).run(["$templateCache",function(a){"use strict";a.put("tree/tree.tpl.html",'<div ui-tree="options" ng-class="{\n       \'drag-enabled\': drag == true,\n       \'drag-disabled\': drag == false,\n     }" data-drag-enabled="drag"><ol ui-tree-nodes ng-model="treeItems"><li ng-repeat="item in treeItems" ui-tree-node data-hippo-node-template-url="tree/tree-include.tpl.html" data-ng-class="{active: selectedItem.id == item.id}" scroll-to-if="selectedItem.id == item.id" data-collapsed="item.collapsed"></li></ol></div>')}]),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("a",function(){return{restrict:"E",link:function(a,b){b.on("click",function(){b.blur()})}}}).directive("button",function(){return{restrict:"E",link:function(a,b){b.on("click",function(){b.blur()})}}})}(),/*
 * Copyright 2014 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";
// Override ui.bootstrap carousel template
angular.module("template/carousel/carousel.html",["carousel/carousel.tpl.html"]).run(["$templateCache",function(a){var b=a.get("carousel/carousel.tpl.html");a.put("template/carousel/carousel.html",b)}]),angular.module("hippo.theme").directive("hippoCarouselIndicator",[function(){return{restrict:"A",templateUrl:"carousel/carousel-indicator.tpl.html",link:function(a,b,c){
// Get corresponding slide object from the slide scope
var d=a.slide.$element.scope().slides[a.$index];a.imgSrc=d.image}}}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("hippoConfirmationDialog",[function(){return{restrict:"A",replace:!0,transclude:!0,templateUrl:"confirmation-dialog/confirmation-dialog.tpl.html",scope:{confirmIcon:"@",confirmLabel:"@",cancelLabel:"@",performConfirmation:"&",performCancel:"&",show:"="}}}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("hippoDivider",[function(){return{restrict:"A",link:function(a,b,c){var d=a.$eval(c.hippoDivider);d&&b.before('<li role="presentation" class="divider"></li>')}}}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";/**
   * @ngdoc directive
   * @name hippoFocusMe
   * @restrict A
   *
   * @description
   * Sets the focus on an element.
   * Credits to Mark Rajcok: http://stackoverflow.com/a/14837021/363448
   */
angular.module("hippo.theme").directive("hippoFocusMe",[function(){return{restrict:"A",scope:{trigger:"=hippoFocusMe"},link:function(a,b){a.$watch("trigger",function(a,c){a&&a!==c&&b[0].focus()}),b.blur(function(){a.trigger=!1}),b.focus(function(){a.trigger=!0})}}}])}(),/*
 * Copyright 2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").filter("hippoGetByProperty",function(){return function(a,b,c,d){function e(a){for(var g=0;g<a.length;g++)a[g][b]===c&&(f=a[g]),d&&a[g][d]&&e(a[g][d])}var f;return e(a),f}})}(),/*
 * Copyright 2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("hippoIcon",[function(){return{replace:!0,restrict:"E",scope:{name:"@",position:"@",size:"@"},templateUrl:"hippo-icon/hippo-icon.tpl.html",link:function(a){var b,c="",d="",e="m";a.position&&angular.forEach(a.position.split(" "),function(a,b){"center"===a&&(a=0===b?"vcenter":"hcenter"),c+=" hi-"+a}),a.$watchGroup(["name","size"],function(){a.size?(d=" hi-"+a.name+" hi-"+a.size,b="#hi-"+a.name+"-"+a.size):(d+=" hi-"+a.name+" hi-"+e,b="#hi-"+a.name+"-"+e),a.className="hi"+c+d,a.xlink=b})}}}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("pre",["$window",function(a){return{restrict:"E",link:function(b,c){for(var d=/\s/,e=c.html(),f=0,g=e.substring(0,1),h=e.split("\n"),i="",j=h.length;d.test(g);)g=e.substring(++f,f+1);for(var k=0;k<j;k++)i+=h[k].substring(f)+(k==j-1?"":"\n");i=i.replace(/ /g,"&nbsp;"),c.html(a.prettyPrintOne(i,void 0,!0)),c.addClass("pre-scrollable")}}}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";/**
   * @ngdoc directive
   * @name scrollToIf
   *
   * @description
   * Directive to scroll to an item if an expression evaluates to true.
   */
angular.module("hippo.theme").directive("scrollToIf",["$timeout",function(a){var b=function(a){for(a=a.parentElement;a;){if(a.scrollHeight!==a.clientHeight)return a;if(!a.parentElement)return a;a=a.parentElement}return null};return function(c,d,e){c.$watch(e.scrollToIf,function(c){c&&a(function(){var a=b(d[0]),c=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-top"))||0,e=parseInt(window.getComputedStyle(a,null).getPropertyValue("padding-left"))||0,f=d[0].offsetTop,g=d[0].offsetLeft,h=d[0].clientHeight,i=d[0].clientWidth;f<a.scrollTop?a.scrollTop=f+c:f+h>a.scrollTop+a.clientHeight&&(h>a.clientHeight&&(h-=h-a.clientHeight),a.scrollTop=f+c+h-a.clientHeight),g+i>a.scrollLeft+a.clientWidth&&(a.scrollLeft=g+e)},0)})}}])}(),/*
 * Copyright 2014 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("stopPropagation",function(){return{restrict:"A",link:function(a,b){b.bind("click",function(a){a.stopPropagation()})}}})}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").directive("hippoTree",function(){return{restrict:"A",transclude:!0,scope:{drag:"=",options:"=callbacks",selectedItem:"=",treeItems:"=items"},templateUrl:"tree/tree.tpl.html",controller:"hippo.theme.tree.TreeCtrl"}}).controller("hippo.theme.tree.TreeCtrl",["$transclude","$scope","$filter",function(a,b,c){function d(a,b){return angular.forEach(a,function(a){b[a.id]=a,d(a.items,b)}),b}function e(a,b){angular.forEach(a,function(a){var c=b[a.id];c&&(c.collapsed=a.collapsed)})}this.renderTreeTemplate=a,b.toggleItem=function(){var a=this.$modelValue;this.toggle(),a.collapsed=!a.collapsed,a.collapsed&&c("hippoGetByProperty")(a.items,"id",b.selectedItem.id,"items")&&b.selectItem(a),angular.isFunction(b.options.toggleItem)&&b.options.toggleItem(a)},b.selectItem=function(a){a||(a=this.$modelValue),b.selectedItem=a,angular.isFunction(b.options.selectItem)&&b.options.selectItem(a)},b.displayTreeItem=function(a){return!angular.isFunction(b.options.displayTreeItem)||b.options.displayTreeItem(a)},b.$watch("treeItems",function(a,b){var c=d(b,{}),f=d(a,{});e(c,f)})}]).directive("hippoTreeTemplate",function(){return{require:"^hippoTree",link:function(a,b,c,d){d.renderTreeTemplate(a,function(a){b.replaceWith(a)})}}}).directive("hippoNodeTemplateUrl",["$compile","$http","$templateCache",function(a,b,c){return{restrict:"A",link:function(d,e,f){var g=f.hippoNodeTemplateUrl,h=c.get(g);"undefined"==typeof h?b.get(g).then(function(b){h=b.data,c.put(g,h),a(h)(d,function(a){e.append(a)})}):a(h)(d,function(a){e.append(a)})}}}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";/**
   * @ngdoc directive
   * @name typeaheadFocus
   *
   * @description
   * Show the typeahead on focus
   * Credits to yohairosen: http://stackoverflow.com/questions/24764802/angular-js-automatically-focus-input-and-show-typeahead-dropdown-ui-bootstra#answer-27331340
   */
angular.module("hippo.theme").directive("typeaheadFocus",function(){return{require:"ngModel",link:function(a,b,c,d){b.bind("focus",function(){var a=d.$viewValue;
//restore to null value so that the typeahead can detect a change
" "==d.$viewValue&&d.$setViewValue(null),
//force trigger the popup
d.$setViewValue(" "),
//set the actual value in case there was already a value in the input
d.$setViewValue(a||" ")}),
//compare function that treats the empty space as a match
a.emptyOrMatch=function(a,b){return" "==b||a.indexOf(b)>-1}}}})}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").service("hippo.theme.UrlParser",["$rootScope","$location",function(a,b){var c=[],d={};
//we want to update the parts only when a route is actually changed
//as $location.path() will get updated immediately (even if route change fails!)
/**
         * @ngdoc method
         * @name getAll
         * @methodOf hippo.theme.UrlParser
         *
         * @description
         * Get all the URL parts
         *
         * @returns {Array} List of URL parts
         */
/**
         * @ngdoc method
         * @name getFirst
         * @methodOf hippo.theme.UrlParser
         *
         * @description
         * Get the first part of the URL
         *
         * @returns {String} The first part of the URL
         */
/**
         * @ngdoc method
         * @name getAllWithoutLast
         * @methodOf hippo.theme.UrlParser
         *
         * @description
         * Get all the URL parts without the last part. This can be useful when the last part is an id that you don't
         *   want to use.
         *
         * @returns {Array} List of URL parts, without the last part
         */
/**
         * @ngdoc method
         * @name getParent
         * @methodOf hippo.theme.UrlParser
         *
         * @description
         * Get the parent / previous state of the current view
         *
         * @returns {String} The state name for the parent / previous view
         */
return a.$on("$stateChangeSuccess",function(){var a,d=b.path().split("/"),e=[],f=function(a){return"/"+d.slice(0,a+1).join("/")};for(d.shift(),a=0;a<d.length;a++)e.push({name:d[a],path:f(a)});c=e}),d.getAll=function(){return c},d.getFirst=function(){return c[0]||{}},d.getAllWithoutLast=function(){var a=c.slice(0);return a.pop(),a},d.getParent=function(){return c[c.length-2]||null},d}])}(),/*
 * Copyright 2014-2015 Hippo B.V. (http://www.onehippo.com)
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){"use strict";angular.module("hippo.theme").service("hippoViewportSizes",[function(){var a={},b=[{order:0,name:"xs",active:!1},{order:1,name:"sm",active:!1},{order:2,name:"md",active:!1},{order:3,name:"lg",active:!1}];/**
         * @ngdoc method
         * @name getAll
         * @methodOf hippoViewportSizes
         *
         * @description
         * Returns all the possible viewport sizes
         *
         * @returns {Array} List of viewport sizes
         */
/**
         * @ngdoc method
         * @name setCurrent
         * @methodOf hippoViewportSizes
         * @param {Object} viewport The viewport to set as active
         *
         * @description
         * Sets the current active viewport. It also updates the $rootScope `activeViewport` property with the active
         *   viewport;
         */
/**
         * @ngdoc method
         * @name getCurrent
         * @methodOf hippoViewportSizes
         *
         * @description
         * Fetches the current active viewport
         *
         * @returns {Object} The current active viewport
         */
return a.getAll=function(){return b},a.setCurrent=function(a){angular.forEach(b,function(b){b.active=a.name==b.name})},a.getCurrent=function(){for(var a=0,c=b.length;a<c;a++)if(b[a].active===!0)return b[a]},a}]).directive("hippoViewportTest",["$window","hippoViewportSizes",function(a,b){return{restrict:"A",replace:!0,template:"<div></div>",link:function(c,d){
// detect viewport size
function e(){
// optimized version of http://stackoverflow.com/a/15150381/363448
var a=angular.element("<div>");d.append(a);for(var c=b.getAll(),e=c.length-1;e>=0;e--){var f=c[e];if(a.addClass("hidden-"+f.name),a.is(":hidden"))return a.remove(),void b.setCurrent(f)}}
// initial detection
e(),
// window resize
angular.element(a).bind("resize",function(){e()})}}}])}();